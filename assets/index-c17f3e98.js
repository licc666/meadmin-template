import{x as ue,r as _,q as U,v as S,B as M,n as G,S as V,o as y,c as F,a as w,V as p,A as r,W as T,C as Q,G as he,L as Ve,y as He,J as Ie,aw as Be,a6 as Oe,s as R,R as We,_ as Y,w as H,X as de,k as A,$ as j,az as fe,j as pe,t as ve,a1 as De}from"./core-d086e217.js";import{c as Ke,u as Xe,b as ze,d as Re,E as me}from"./index-bb6527ef.js";import{e as ye,f as Me,Y as Ye,h as D,aD as ge,k as K,a4 as je,al as x,g as qe,X as Ue,E as be,Z as Ge,ak as ke,w as Ze}from"./index-391c66f0.js";import{E as Je}from"./index-61c50de1.js";import{e as Qe,d as xe}from"./elIcon-e456a308.js";import{U as ne,C as et}from"./event-9519ab40.js";import{C as tt}from"./index-8842122b.js";const oe=e=>{let o,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,o=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,o=e.touches[0].clientX):(n=e.clientY,o=e.clientX),{clientX:o,clientY:n}},nt=ye({color:{type:Me(Object),required:!0},vertical:{type:Boolean,default:!1}});let ee=!1;function W(e,o){if(!Ye)return;const n=function(a){var l;(l=o.drag)==null||l.call(o,a)},t=function(a){var l;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,ee=!1,(l=o.end)==null||l.call(o,a)},s=function(a){var l;ee||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",t),document.addEventListener("touchmove",n),document.addEventListener("touchend",t),ee=!0,(l=o.start)==null||l.call(o,a))};e.addEventListener("mousedown",s),e.addEventListener("touchstart",s)}const ot=e=>{const o=G(),n=ue(),t=ue();function s(l){l.target!==n.value&&a(l)}function a(l){if(!t.value||!n.value)return;const i=o.vnode.el.getBoundingClientRect(),{clientX:u,clientY:$}=oe(l);if(e.vertical){let h=$-i.top;h=Math.max(n.value.offsetHeight/2,h),h=Math.min(h,i.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((h-n.value.offsetHeight/2)/(i.height-n.value.offsetHeight)*100))}else{let h=u-i.left;h=Math.max(n.value.offsetWidth/2,h),h=Math.min(h,i.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((h-n.value.offsetWidth/2)/(i.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:t,handleDrag:a,handleClick:s}},at=(e,{bar:o,thumb:n,handleDrag:t})=>{const s=G(),a=D("color-alpha-slider"),l=_(0),c=_(0),i=_();function u(){if(!n.value||e.vertical)return 0;const v=s.vnode.el,f=e.color.get("alpha");return v?Math.round(f*(v.offsetWidth-n.value.offsetWidth/2)/100):0}function $(){if(!n.value)return 0;const v=s.vnode.el;if(!e.vertical)return 0;const f=e.color.get("alpha");return v?Math.round(f*(v.offsetHeight-n.value.offsetHeight/2)/100):0}function h(){if(e.color&&e.color.value){const{r:v,g:f,b:X}=e.color.toRgb();return`linear-gradient(to right, rgba(${v}, ${f}, ${X}, 0) 0%, rgba(${v}, ${f}, ${X}, 1) 100%)`}return""}function C(){l.value=u(),c.value=$(),i.value=h()}U(()=>{if(!o.value||!n.value)return;const v={drag:f=>{t(f)},end:f=>{t(f)}};W(o.value,v),W(n.value,v),C()}),S(()=>e.color.get("alpha"),()=>C()),S(()=>e.color.value,()=>C());const m=M(()=>[a.b(),a.is("vertical",e.vertical)]),g=M(()=>a.e("bar")),b=M(()=>a.e("thumb")),k=M(()=>({background:i.value})),N=M(()=>({left:ge(l.value),top:ge(c.value)}));return{rootKls:m,barKls:g,barStyle:k,thumbKls:b,thumbStyle:N,update:C}},lt="ElColorAlphaSlider",st=V({name:lt}),rt=V({...st,props:nt,setup(e,{expose:o}){const n=e,{bar:t,thumb:s,handleDrag:a,handleClick:l}=ot(n),{rootKls:c,barKls:i,barStyle:u,thumbKls:$,thumbStyle:h,update:C}=at(n,{bar:t,thumb:s,handleDrag:a});return o({update:C,bar:t,thumb:s}),(m,g)=>(y(),F("div",{class:p(r(c))},[w("div",{ref_key:"bar",ref:t,class:p(r(i)),style:T(r(u)),onClick:g[0]||(g[0]=(...b)=>r(l)&&r(l)(...b))},null,6),w("div",{ref_key:"thumb",ref:s,class:p(r($)),style:T(r(h))},null,6)],2))}});var it=K(rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const ct=V({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const o=D("color-hue-slider"),n=G(),t=_(),s=_(),a=_(0),l=_(0),c=M(()=>e.color.get("hue"));S(()=>c.value,()=>{C()});function i(m){m.target!==t.value&&u(m)}function u(m){if(!s.value||!t.value)return;const b=n.vnode.el.getBoundingClientRect(),{clientX:k,clientY:N}=oe(m);let v;if(e.vertical){let f=N-b.top;f=Math.min(f,b.height-t.value.offsetHeight/2),f=Math.max(t.value.offsetHeight/2,f),v=Math.round((f-t.value.offsetHeight/2)/(b.height-t.value.offsetHeight)*360)}else{let f=k-b.left;f=Math.min(f,b.width-t.value.offsetWidth/2),f=Math.max(t.value.offsetWidth/2,f),v=Math.round((f-t.value.offsetWidth/2)/(b.width-t.value.offsetWidth)*360)}e.color.set("hue",v)}function $(){if(!t.value)return 0;const m=n.vnode.el;if(e.vertical)return 0;const g=e.color.get("hue");return m?Math.round(g*(m.offsetWidth-t.value.offsetWidth/2)/360):0}function h(){if(!t.value)return 0;const m=n.vnode.el;if(!e.vertical)return 0;const g=e.color.get("hue");return m?Math.round(g*(m.offsetHeight-t.value.offsetHeight/2)/360):0}function C(){a.value=$(),l.value=h()}return U(()=>{if(!s.value||!t.value)return;const m={drag:g=>{u(g)},end:g=>{u(g)}};W(s.value,m),W(t.value,m),C()}),{bar:s,thumb:t,thumbLeft:a,thumbTop:l,hueValue:c,handleClick:i,update:C,ns:o}}});function ut(e,o,n,t,s,a){return y(),F("div",{class:p([e.ns.b(),e.ns.is("vertical",e.vertical)])},[w("div",{ref:"bar",class:p(e.ns.e("bar")),onClick:o[0]||(o[0]=(...l)=>e.handleClick&&e.handleClick(...l))},null,2),w("div",{ref:"thumb",class:p(e.ns.e("thumb")),style:T({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var ht=K(ct,[["render",ut],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const dt=ye({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:je,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Me(Array)},validateEvent:{type:Boolean,default:!0}}),ft={[ne]:e=>Q(e)||x(e),[et]:e=>Q(e)||x(e),activeChange:e=>Q(e)||x(e)},Ee=Symbol("colorPickerContextKey"),_e=function(e,o,n){return[e,o*n/((e=(2-o)*n)<1?e:2-e)||0,e/2]},pt=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},vt=function(e){return typeof e=="string"&&e.includes("%")},I=function(e,o){pt(e)&&(e="100%");const n=vt(e);return e=Math.min(o,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(`${e*o}`,10)/100),Math.abs(e-o)<1e-6?1:e%o/Number.parseFloat(o)},$e={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},q=e=>{e=Math.min(Math.round(e),255);const o=Math.floor(e/16),n=e%16;return`${$e[o]||o}${$e[n]||n}`},Ce=function({r:e,g:o,b:n}){return Number.isNaN(+e)||Number.isNaN(+o)||Number.isNaN(+n)?"":`#${q(e)}${q(o)}${q(n)}`},te={A:10,B:11,C:12,D:13,E:14,F:15},L=function(e){return e.length===2?(te[e[0].toUpperCase()]||+e[0])*16+(te[e[1].toUpperCase()]||+e[1]):te[e[1].toUpperCase()]||+e[1]},mt=function(e,o,n){o=o/100,n=n/100;let t=o;const s=Math.max(n,.01);n*=2,o*=n<=1?n:2-n,t*=s<=1?s:2-s;const a=(n+o)/2,l=n===0?2*t/(s+t):2*o/(n+o);return{h:e,s:l*100,v:a*100}},we=(e,o,n)=>{e=I(e,255),o=I(o,255),n=I(n,255);const t=Math.max(e,o,n),s=Math.min(e,o,n);let a;const l=t,c=t-s,i=t===0?0:c/t;if(t===s)a=0;else{switch(t){case e:{a=(o-n)/c+(o<n?6:0);break}case o:{a=(n-e)/c+2;break}case n:{a=(e-o)/c+4;break}}a/=6}return{h:a*360,s:i*100,v:l*100}},B=function(e,o,n){e=I(e,360)*6,o=I(o,100),n=I(n,100);const t=Math.floor(e),s=e-t,a=n*(1-o),l=n*(1-s*o),c=n*(1-(1-s)*o),i=t%6,u=[n,l,a,a,c,n][i],$=[c,n,n,l,a,a][i],h=[a,a,c,n,n,l][i];return{r:Math.round(u*255),g:Math.round($*255),b:Math.round(h*255)}};class O{constructor(o={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in o)he(o,n)&&(this[n]=o[n]);o.value?this.fromString(o.value):this.doOnChange()}set(o,n){if(arguments.length===1&&typeof o=="object"){for(const t in o)he(o,t)&&this.set(t,o[t]);return}this[`_${o}`]=n,this.doOnChange()}get(o){return o==="alpha"?Math.floor(this[`_${o}`]):this[`_${o}`]}toRgb(){return B(this._hue,this._saturation,this._value)}fromString(o){if(!o){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(t,s,a)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,s)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(o.includes("hsl")){const t=o.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,a)=>a>2?Number.parseFloat(s):Number.parseInt(s,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:s,s:a,v:l}=mt(t[0],t[1],t[2]);n(s,a,l)}}else if(o.includes("hsv")){const t=o.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,a)=>a>2?Number.parseFloat(s):Number.parseInt(s,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&n(t[0],t[1],t[2])}else if(o.includes("rgb")){const t=o.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,a)=>a>2?Number.parseFloat(s):Number.parseInt(s,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:s,s:a,v:l}=we(t[0],t[1],t[2]);n(s,a,l)}}else if(o.includes("#")){const t=o.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let s,a,l;t.length===3?(s=L(t[0]+t[0]),a=L(t[1]+t[1]),l=L(t[2]+t[2])):(t.length===6||t.length===8)&&(s=L(t.slice(0,2)),a=L(t.slice(2,4)),l=L(t.slice(4,6))),t.length===8?this._alpha=L(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:c,s:i,v:u}=we(s,a,l);n(c,i,u)}}compare(o){return Math.abs(o._hue-this._hue)<2&&Math.abs(o._saturation-this._saturation)<1&&Math.abs(o._value-this._value)<1&&Math.abs(o._alpha-this._alpha)<1}doOnChange(){const{_hue:o,_saturation:n,_value:t,_alpha:s,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const l=_e(o,n/100,t/100);this.value=`hsla(${o}, ${Math.round(l[1]*100)}%, ${Math.round(l[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${o}, ${Math.round(n)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Ce(B(o,n,t))}${q(s*255/100)}`;break}default:{const{r:l,g:c,b:i}=B(o,n,t);this.value=`rgba(${l}, ${c}, ${i}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const l=_e(o,n/100,t/100);this.value=`hsl(${o}, ${Math.round(l[1]*100)}%, ${Math.round(l[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${o}, ${Math.round(n)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:l,g:c,b:i}=B(o,n,t);this.value=`rgb(${l}, ${c}, ${i})`;break}default:this.value=Ce(B(o,n,t))}}}const gt=V({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const o=D("color-predefine"),{currentColor:n}=Ve(Ee),t=_(a(e.colors,e.color));S(()=>n.value,l=>{const c=new O;c.fromString(l),t.value.forEach(i=>{i.selected=c.compare(i)})}),He(()=>{t.value=a(e.colors,e.color)});function s(l){e.color.fromString(e.colors[l])}function a(l,c){return l.map(i=>{const u=new O;return u.enableAlpha=!0,u.format="rgba",u.fromString(i),u.selected=u.value===c.value,u})}return{rgbaColors:t,handleSelect:s,ns:o}}}),bt=["onClick"];function kt(e,o,n,t,s,a){return y(),F("div",{class:p(e.ns.b())},[w("div",{class:p(e.ns.e("colors"))},[(y(!0),F(Ie,null,Be(e.rgbaColors,(l,c)=>(y(),F("div",{key:e.colors[c],class:p([e.ns.e("color-selector"),e.ns.is("alpha",l._alpha<100),{selected:l.selected}]),onClick:i=>e.handleSelect(c)},[w("div",{style:T({backgroundColor:l.value})},null,4)],10,bt))),128))],2)],2)}var _t=K(gt,[["render",kt],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const $t=V({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const o=D("color-svpanel"),n=G(),t=_(0),s=_(0),a=_("hsl(0, 100%, 50%)"),l=M(()=>{const u=e.color.get("hue"),$=e.color.get("value");return{hue:u,value:$}});function c(){const u=e.color.get("saturation"),$=e.color.get("value"),h=n.vnode.el,{clientWidth:C,clientHeight:m}=h;s.value=u*C/100,t.value=(100-$)*m/100,a.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function i(u){const h=n.vnode.el.getBoundingClientRect(),{clientX:C,clientY:m}=oe(u);let g=C-h.left,b=m-h.top;g=Math.max(0,g),g=Math.min(g,h.width),b=Math.max(0,b),b=Math.min(b,h.height),s.value=g,t.value=b,e.color.set({saturation:g/h.width*100,value:100-b/h.height*100})}return S(()=>l.value,()=>{c()}),U(()=>{W(n.vnode.el,{drag:u=>{i(u)},end:u=>{i(u)}}),c()}),{cursorTop:t,cursorLeft:s,background:a,colorValue:l,handleDrag:i,update:c,ns:o}}}),Ct=w("div",null,null,-1),wt=[Ct];function yt(e,o,n,t,s,a){return y(),F("div",{class:p(e.ns.b()),style:T({backgroundColor:e.background})},[w("div",{class:p(e.ns.e("white"))},null,2),w("div",{class:p(e.ns.e("black"))},null,2),w("div",{class:p(e.ns.e("cursor")),style:T({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},wt,6)],6)}var Mt=K($t,[["render",yt],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const Et=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],St=V({name:"ElColorPicker"}),Nt=V({...St,props:dt,emits:ft,setup(e,{expose:o,emit:n}){const t=e,{t:s}=qe(),a=D("color"),{formItem:l}=Ke(),c=Xe(),i=ze(),{inputId:u,isLabeledByFormItem:$}=Re(t,{formItemContext:l}),h=_(),C=_(),m=_(),g=_();let b=!0;const k=Oe(new O({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),N=_(!1),v=_(!1),f=_(""),X=M(()=>!t.modelValue&&!v.value?"transparent":Fe(k,t.showAlpha)),Z=M(()=>!t.modelValue&&!v.value?"":k.value),Se=M(()=>$.value?void 0:t.label||s("el.colorpicker.defaultLabel")),Ne=M(()=>$.value?l==null?void 0:l.labelId:void 0),Ae=M(()=>[a.b("picker"),a.is("disabled",i.value),a.bm("picker",c.value)]);function Fe(d,E){if(!(d instanceof O))throw new TypeError("color should be instance of _color Class");const{r:P,g:ie,b:ce}=d.toRgb();return E?`rgba(${P}, ${ie}, ${ce}, ${d.get("alpha")/100})`:`rgb(${P}, ${ie}, ${ce})`}function ae(d){N.value=d}const z=Ue(ae,100);function Pe(){i.value||ae(!0)}function le(){z(!1),J()}function J(){R(()=>{t.modelValue?k.fromString(t.modelValue):(k.value="",R(()=>{v.value=!1}))})}function se(){i.value||z(!N.value)}function re(){k.fromString(f.value)}function Le(){const d=k.value;n(ne,d),n("change",d),t.validateEvent&&(l==null||l.validate("change").catch(E=>ke())),z(!1),R(()=>{const E=new O({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});k.compare(E)||J()})}function Te(){z(!1),n(ne,null),n("change",null),t.modelValue!==null&&t.validateEvent&&(l==null||l.validate("change").catch(d=>ke())),J()}return U(()=>{t.modelValue&&(f.value=Z.value)}),S(()=>t.modelValue,d=>{d?d&&d!==k.value&&(b=!1,k.fromString(d)):v.value=!1}),S(()=>Z.value,d=>{f.value=d,b&&n("activeChange",d),b=!0}),S(()=>k.value,()=>{!t.modelValue&&!v.value&&(v.value=!0)}),S(()=>N.value,()=>{R(()=>{var d,E,P;(d=h.value)==null||d.update(),(E=C.value)==null||E.update(),(P=m.value)==null||P.update()})}),We(Ee,{currentColor:Z}),o({color:k,show:Pe,hide:le}),(d,E)=>(y(),Y(r(Ge),{ref_key:"popper",ref:g,visible:N.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[r(a).be("picker","panel"),r(a).b("dropdown"),d.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${r(a).namespace.value}-zoom-in-top`,persistent:""},{content:H(()=>[de((y(),F("div",null,[w("div",{class:p(r(a).be("dropdown","main-wrapper"))},[A(ht,{ref_key:"hue",ref:h,class:"hue-slider",color:r(k),vertical:""},null,8,["color"]),A(Mt,{ref_key:"sv",ref:C,color:r(k)},null,8,["color"])],2),d.showAlpha?(y(),Y(it,{key:0,ref_key:"alpha",ref:m,color:r(k)},null,8,["color"])):j("v-if",!0),d.predefine?(y(),Y(_t,{key:1,ref:"predefine",color:r(k),colors:d.predefine},null,8,["color","colors"])):j("v-if",!0),w("div",{class:p(r(a).be("dropdown","btns"))},[w("span",{class:p(r(a).be("dropdown","value"))},[A(r(Je),{modelValue:f.value,"onUpdate:modelValue":E[0]||(E[0]=P=>f.value=P),"validate-event":!1,size:"small",onKeyup:fe(re,["enter"]),onBlur:re},null,8,["modelValue","onKeyup"])],2),A(r(me),{class:p(r(a).be("dropdown","link-btn")),text:"",size:"small",onClick:Te},{default:H(()=>[pe(ve(r(s)("el.colorpicker.clear")),1)]),_:1},8,["class"]),A(r(me),{plain:"",size:"small",class:p(r(a).be("dropdown","btn")),onClick:Le},{default:H(()=>[pe(ve(r(s)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[r(tt),le]])]),default:H(()=>[w("div",{id:r(u),class:p(r(Ae)),role:"button","aria-label":r(Se),"aria-labelledby":r(Ne),"aria-description":r(s)("el.colorpicker.description",{color:d.modelValue||""}),tabindex:d.tabindex,onKeydown:fe(se,["enter"])},[r(i)?(y(),F("div",{key:0,class:p(r(a).be("picker","mask"))},null,2)):j("v-if",!0),w("div",{class:p(r(a).be("picker","trigger")),onClick:se},[w("span",{class:p([r(a).be("picker","color"),r(a).is("alpha",d.showAlpha)])},[w("span",{class:p(r(a).be("picker","color-inner")),style:T({backgroundColor:r(X)})},[de(A(r(be),{class:p([r(a).be("picker","icon"),r(a).is("icon-arrow-down")])},{default:H(()=>[A(r(Qe))]),_:1},8,["class"]),[[De,d.modelValue||v.value]]),!d.modelValue&&!v.value?(y(),Y(r(be),{key:0,class:p([r(a).be("picker","empty"),r(a).is("icon-close")])},{default:H(()=>[A(r(xe))]),_:1},8,["class"])):j("v-if",!0)],6)],2)],2)],42,Et)]),_:1},8,["visible","popper-class","transition"]))}});var At=K(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const Bt=Ze(At);export{Bt as E};

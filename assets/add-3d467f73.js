import{aG as n,ab as c,_ as U}from"./index-391c66f0.js";import"./mock-d5a52175.js";import{E as V}from"./index-1122482a.js";import{a as h,E as A}from"./index-32c476c1.js";import{E as I}from"./index-61c50de1.js";import{b as k,E as S}from"./index-a38d58ec.js";import{E as T}from"./index-bb6527ef.js";import{E as G}from"./index-96f15593.js";import{S as x,r as E,a6 as j,v as w,B as F,o as N,_ as z,w as a,k as t,A as l,j as m}from"./core-d086e217.js";class y{constructor(){n(this,"id",void 0),n(this,"parentId",void 0),n(this,"name",""),n(this,"rules",[]),n(this,"status",1)}}function K(){return c(s=>({url:"admin/group/add",method:"POST",data:s}),{success:!0})}function M(){return c((s,d)=>({url:"admin/group/{id}".replace("{id}",s+""),method:"POST",data:d}),{success:!0})}function le(){return c(s=>({url:"admin/group/{id}".replace("{id}",s+""),method:"DELETE"}),{success:!0})}function $(){return c(()=>({url:"admin/group/index",method:"get"}),{noLoading:!0,cacheKey:"groupList",cacheTime:5*60*1e3})}const H=x({setup:!0,name:"Add",getComponents:()=>[V,h,I,k,S,T,A,G]}),J=x({...H,__name:"add",props:{show:{type:Boolean},data:{}},emits:["update:show","success"],setup(s,{emit:d}){const i=s,_=E(),e=E(new y),B=j({parentId:[{required:!0,message:"父级必须选择",trigger:"blur"}],name:[{required:!0,message:"名称必须填写",trigger:"blur"}],status:[{required:!0,message:"状态必须选择",trigger:"blur"}]}),g=()=>{i.data?e.value={...i.data}:e.value=new y};w(()=>i.data,g);const f=$();f.run();const C=F(()=>f.data.value?[{id:0,name:"无",parentId:0,children:[],rules:[],status:0},...f.data.value]:[]);w(()=>i.show,u=>{!u&&_.value.clearValidate()});const D=async()=>{await _.value.validate()&&(e.value.id?await M().runAsync(e.value.id,e.value):await K().runAsync(e.value),d("success"),d("update:show",!1))};return(u,o)=>{const q=V,p=h,L=I,v=k,O=S,b=T,P=A,R=G;return N(),z(R,{"model-value":u.show,title:u.data?"编辑":"新增","onUpdate:modelValue":o[4]||(o[4]=r=>d("update:show",r))},{default:a(()=>[t(P,{ref_key:"formRef",ref:_,model:l(e),rules:l(B)},{default:a(()=>[t(p,{label:"父级",prop:"parentId"},{default:a(()=>[t(q,{modelValue:l(e).parentId,"onUpdate:modelValue":o[0]||(o[0]=r=>l(e).parentId=r),disabled:u.data!==void 0,props:{label:"name",value:"id",disabled:({id:r})=>r<=0},data:l(C),"render-after-expand":!1,filterable:"","check-strictly":""},null,8,["modelValue","disabled","props","data"])]),_:1}),t(p,{label:"名称",prop:"name"},{default:a(()=>[t(L,{modelValue:l(e).name,"onUpdate:modelValue":o[1]||(o[1]=r=>l(e).name=r)},null,8,["modelValue"])]),_:1}),t(p,{label:"状态",prop:"status"},{default:a(()=>[t(O,{modelValue:l(e).status,"onUpdate:modelValue":o[2]||(o[2]=r=>l(e).status=r)},{default:a(()=>[t(v,{label:1},{default:a(()=>[m("启用")]),_:1}),t(v,{label:0},{default:a(()=>[m("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:a(()=>[t(b,{type:"primary",onClick:D},{default:a(()=>[m("提交")]),_:1}),t(b,{onClick:o[3]||(o[3]=r=>g())},{default:a(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}}});const Q=U(J,[["__scopeId","data-v-e51e8b4a"]]),se=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as A,se as a,le as d,M as e,$ as g};

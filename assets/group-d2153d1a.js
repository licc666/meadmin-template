import{_ as A}from"./index-094af656.js";import{g as q,A as T,d as K,e as D}from"./add-3d467f73.js";import{aK as H,am as I,aL as U,_ as j}from"./index-391c66f0.js";import{e as w}from"./index-c2d633e6.js";import{E as R}from"./index-9a3e8ce3.js";import{o as z}from"./omit-7cb21f5a.js";import{E as O}from"./index-be857a20.js";import{S as E,r as d,x as Q,i as r,o as C,c as F,k as n,w as s,a as c,j as k,_ as J,$ as P,A as i,M as y,s as W}from"./core-d086e217.js";import"./pagination-f5b554ba.js";import"./elIcon-e456a308.js";import"./index-61c50de1.js";import"./event-9519ab40.js";import"./index-bb6527ef.js";import"./vue.runtime.esm-bundler-36fda889.js";import"./mock-d5a52175.js";import"./index-7be35ccf.js";import"./index-589bce5d.js";import"./flatten-d075e74e.js";import"./identity-46f208ab.js";import"./index-8a321c97.js";import"./index-4d99d7b2.js";import"./dropdown-68e52a79.js";import"./index-1122482a.js";import"./index-32c476c1.js";import"./index-a38d58ec.js";import"./index-96f15593.js";import"./index-27e5bc6b.js";import"./scroll-62c8a58b.js";import"./refs-ae9aa695.js";import"./index-8842122b.js";import"./validator-7045813a.js";import"./isPlainObject-9a523685.js";const X={class:"group"},Y={class:"group-item"},Z=["innerHTML"],ee={class:"group-item-btn"},te=E({setup:!0,name:"Group",getComponents:()=>[w,r("mel-icon-edit"),R,r("mel-icon-delete"),r("vxe-column"),A,T]}),oe=E({...te,__name:"group",emits:["currentChange"],setup(ne,{expose:b,emit:_}){const l=d(!1),u=d(),a=q();let f=[];const m=d(""),g=e=>{a.data.value=H(e,["name"],f),W(()=>u.value.vxeTableRef.setAllTreeExpand(!0))},p=async()=>{await a.runAsync(),f=I(a.data.value),_("currentChange",[]),g(u.value.searchText)};p();const G=({row:e})=>_("currentChange",e.rules),v=Q(),h=e=>{v.value=e?z(e,["children"]):void 0,l.value=!0},B=e=>{O.confirm("确认删除所选角色组?").then(()=>{K().runAsync(e).then(p)}).catch(()=>{})};return b({setGroupRules:async e=>{if(!e)return!1;const t=u.value.vxeTableRef.getCurrentRecord();if(t)return await D().runAsync(t.id,{rules:e}),t.rules=e,!0;U.error("请先选择分组")}}),(e,t)=>{const L=w,M=r("mel-icon-edit"),x=R,$=r("mel-icon-delete"),N=r("vxe-column"),S=A;return C(),F("div",X,[n(S,{ref_key:"groupRef",ref:u,"quick-search":i(m),"onUpdate:quickSearch":t[0]||(t[0]=o=>y(m)?m.value=o:null),data:i(a).data.value??[],loading:i(a).loading.value,"row-config":{isCurrent:!0,useKey:!0},"tree-config":{expandAll:!0,line:!0},"column-config":{useKey:!0},"custom-column":!1,print:!1,"export-menu":[],"show-overflow":"",height:"auto","me-class":"table-group",onCurrentChange:G,onAdd:t[1]||(t[1]=o=>h()),onRefresh:p,onQuickSearch:g},{default:s(()=>[n(N,{field:"name",title:"角色","tree-node":""},{default:s(({row:o})=>[c("div",Y,[c("div",null,[c("span",{innerHTML:o.name},null,8,Z),k("  "),o.status===0?(C(),J(L,{key:0,size:"small",type:"info"},{default:s(()=>[k("禁用")]),_:1})):P("",!0)]),c("div",ee,[n(x,{type:"primary",underline:!1,onClick:V=>h(o)},{default:s(()=>[n(M)]),_:2},1032,["onClick"]),n(x,{type:"danger",underline:!1,style:{"margin-left":"5px"},onClick:V=>B(o.id)},{default:s(()=>[n($)]),_:2},1032,["onClick"])])])]),_:1})]),_:1},8,["quick-search","data","loading"]),n(T,{show:i(l),"onUpdate:show":t[2]||(t[2]=o=>y(l)?l.value=o:null),data:i(v),onSuccess:t[3]||(t[3]=o=>p())},null,8,["show","data"])])}}});const qe=j(oe,[["__scopeId","data-v-6579e67b"]]);export{qe as default};

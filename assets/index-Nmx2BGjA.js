import{k as L,w as X,B as E,a1 as D,A as T,aA as x,aB as I,aC as A,aD as $,v as _,z as k,Z as f}from"./index-exG9cD4B.js";import{q as U,y as V,P as j,M as q,aJ as F,v as J,u as K,N as p,S as Z,k as G,T as S,a7 as Q}from"./core-HnVZayTs.js";let r;const R=e=>{var o;if(!L)return 0;if(r!==void 0)return r;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const a=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const l=s.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),r=a-l,r},ce=e=>["",...X].includes(e),ie=(e,o,t)=>{let a={offsetX:0,offsetY:0};const s=c=>{const i=c.clientX,m=c.clientY,{offsetX:d,offsetY:v}=a,u=e.value.getBoundingClientRect(),h=u.left,y=u.top,Y=u.width,B=u.height,O=document.documentElement.clientWidth,W=document.documentElement.clientHeight,z=-h+d,N=-y+v,P=O-h-Y+d,H=W-y-B+v,w=g=>{const C=Math.min(Math.max(d+g.clientX-i,z),P),M=Math.min(Math.max(v+g.clientY-m,N),H);a={offsetX:C,offsetY:M},e.value.style.transform=`translate(${E(C)}, ${E(M)})`},b=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",b)},l=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",s)},n=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",s)};U(()=>{V(()=>{t.value?l():n()})}),j(()=>{n()})},de=(e,o={})=>{q(e)||D("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||T("popup"),a=F(()=>t.bm("parent","hidden"));if(!L||x(document.body,a.value))return;let s=0,l=!1,n="0";const c=()=>{setTimeout(()=>{$(document==null?void 0:document.body,a.value),l&&document&&(document.body.style.width=n)},200)};J(e,i=>{if(!i){c();return}l=!x(document.body,a.value),l&&(n=document.body.style.width),s=R(t.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,d=I(document.body,"overflowY");s>0&&(m||d==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),A(document.body,a.value)}),K(()=>c())},ee=e=>{if(!e)return{onClick:p,onMousedown:p,onMouseup:p};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},te=_({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),oe={click:e=>e instanceof MouseEvent},ne="overlay";var se=Z({name:"ElOverlay",props:te,emits:oe,setup(e,{slots:o,emit:t}){const a=T(ne),s=i=>{t("click",i)},{onClick:l,onMousedown:n,onMouseup:c}=ee(e.customMaskEvent?void 0:s);return()=>e.mask?G("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:n,onMouseup:c},[S(o,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(o,"default")])}});const ue=se;export{ue as E,de as a,ee as b,ce as i,ie as u};

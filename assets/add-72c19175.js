import{aG as s,ab as f,_ as H}from"./index-391c66f0.js";import"./mock-d5a52175.js";import{E as x}from"./index-1122482a.js";import{a as B,E as D}from"./index-32c476c1.js";import{E as C}from"./index-61c50de1.js";import{E as L}from"./index-18c42c29.js";import{b as M,E as F}from"./index-a38d58ec.js";import{E as O}from"./index-bb6527ef.js";import{E as P}from"./index-96f15593.js";import{S as R,r as A,a6 as Q,v as h,B as W,o as i,_ as v,w as r,k as o,A as a,c as S,J as T,aw as U,j as c,t as k}from"./core-d086e217.js";class q{constructor(){s(this,"id",void 0),s(this,"parentId",void 0),s(this,"name",""),s(this,"rule",""),s(this,"sort",0),s(this,"status",1),s(this,"type",1)}}function X(){return f(u=>({url:"admin/menu/add",method:"POST",data:u}),{success:!0})}function Y(){return f((u,d)=>({url:"admin/menu/{id}".replace("{id}",u+""),method:"POST",data:d}),{success:!0})}function fe(){return f(u=>({url:"admin/menu/{id}".replace("{id}",u+""),method:"DELETE"}),{success:!0})}function Z(){return f(()=>({url:"menu/index",method:"get"}),{noLoading:!0,cacheKey:"menuList",cacheTime:5*60*1e3})}const ee={1:"菜单",2:"页面",3:"按钮"},te={0:"关闭",1:"开启"},ae=R({setup:!0,name:"Add",getComponents:()=>[x,B,C,L,M,F,O,D,P]}),le=R({...ae,__name:"add",props:{show:{type:Boolean},data:{}},emits:["update:show","success"],setup(u,{emit:d}){const p=u,b=A(),e=A(new q),j=Q({parentId:[{required:!0,message:"父级必须选择",trigger:"blur"}],name:[{required:!0,message:"名称必须填写",trigger:"blur"}],rule:[{required:!0,message:"规则必须填写",trigger:"blur"}],type:[{required:!0,message:"类型必须选择",trigger:"blur"}],status:[{required:!0,message:"状态必须选择",trigger:"blur"}]}),V=()=>{p.data?e.value={...p.data}:e.value=new q};h(()=>p.data,V);const g=Z();g.run();const N=W(()=>g.data.value?[{id:0,name:"无",parentId:0,children:[],status:1},...g.data.value]:[]);h(()=>p.show,_=>{!_&&b.value.clearValidate()});const G=async()=>{await b.value.validate()&&(e.value.id?await Y().runAsync(e.value.id,e.value):await X().runAsync(e.value),d("success"),d("update:show",!1))};return(_,l)=>{const z=x,n=B,E=C,J=L,y=M,w=F,I=O,K=D,$=P;return i(),v($,{"model-value":_.show,title:_.data?"编辑":"新增","onUpdate:modelValue":l[7]||(l[7]=t=>d("update:show",t))},{default:r(()=>[o(K,{ref_key:"formRef",ref:b,model:a(e),rules:a(j)},{default:r(()=>[o(n,{label:"父级",prop:"parentId"},{default:r(()=>[o(z,{modelValue:a(e).parentId,"onUpdate:modelValue":l[0]||(l[0]=t=>a(e).parentId=t),props:{label:"name",value:"id"},data:a(N),"render-after-expand":!1,filterable:"","check-strictly":""},null,8,["modelValue","data"])]),_:1}),o(n,{label:"名称",prop:"name"},{default:r(()=>[o(E,{modelValue:a(e).name,"onUpdate:modelValue":l[1]||(l[1]=t=>a(e).name=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"规则",prop:"rule"},{default:r(()=>[o(E,{modelValue:a(e).rule,"onUpdate:modelValue":l[2]||(l[2]=t=>a(e).rule=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"排序",prop:"sort"},{default:r(()=>[o(J,{modelValue:a(e).sort,"onUpdate:modelValue":l[3]||(l[3]=t=>a(e).sort=t)},null,8,["modelValue"])]),_:1}),o(n,{label:"类型",prop:"type"},{default:r(()=>[o(w,{modelValue:a(e).type,"onUpdate:modelValue":l[4]||(l[4]=t=>a(e).type=t)},{default:r(()=>[(i(!0),S(T,null,U(a(ee),(t,m)=>(i(),v(y,{key:m,label:+m},{default:r(()=>[c(k(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"状态",prop:"status"},{default:r(()=>[o(w,{modelValue:a(e).status,"onUpdate:modelValue":l[5]||(l[5]=t=>a(e).status=t)},{default:r(()=>[(i(!0),S(T,null,U(a(te),(t,m)=>(i(),v(y,{key:m,label:+m},{default:r(()=>[c(k(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,null,{default:r(()=>[o(I,{type:"primary",onClick:G},{default:r(()=>[c("提交")]),_:1}),o(I,{onClick:l[6]||(l[6]=t=>V())},{default:r(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}}});const oe=H(le,[["__scopeId","data-v-777b7dce"]]),be=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{oe as A,be as a,fe as d,Z as m,te as s,ee as t};

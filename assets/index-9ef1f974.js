import{S as ue,a7 as Pa,L as xe,B as m,i as J,o as g,c as L,$ as U,_ as F,ad as ke,w as z,k as Y,V as x,J as oe,a as ve,r as _,aw as ge,j as La,t as se,n as Ba,O as Je,N as Ha,R as Fa,a6 as za,v as ne,aJ as Aa,q as ca,s as he,aG as Ka,aK as Oa,X as me,A as r,W as Ae,az as qa,aL as Ra,M as ja,a1 as Ie,T as Ua,D as He,E as Ye,aj as Fe,C as Ge,ac as ze}from"./core-d086e217.js";import{h as de,k as Ne,E as ce,g as da,aq as Ke,a6 as Wa,e as qe,f as re,ar as Za,am as pa,Y as fa,l as O,as as Ve,at as va,a4 as ha,ac as Xa,U as Ja,ak as Ya,X as Ga,au as Qa,a3 as el,Z as Qe,m as ea,av as aa,i as la,aw as al,ax as ll,a1 as ta,w as tl}from"./index-391c66f0.js";import{E as ma}from"./index-8a321c97.js";import{t as ga,l as ba,f as sl,a as nl,e as ol,x as Se,y as rl}from"./elIcon-e456a308.js";import{E as il}from"./index-589bce5d.js";import{b as ul}from"./index-a38d58ec.js";import{c as sa,C as cl}from"./index-8842122b.js";import{i as Ce,t as dl,e as na}from"./index-c2d633e6.js";import{U as ie,C as we}from"./event-9519ab40.js";import{f as oa,g as ra}from"./index-7862302d.js";import{s as pl}from"./scroll-62c8a58b.js";import{b as fl}from"./flatten-d075e74e.js";import{E as vl,i as hl}from"./index-61c50de1.js";import{c as ml,u as ya,d as gl}from"./index-bb6527ef.js";var bl=1/0;function yl(e){var l=e==null?0:e.length;return l?fl(e,bl):[]}const kl=()=>Math.floor(Math.random()*1e4);var Cl=ue({name:"NodeContent",setup(){return{ns:de("cascader-node")}},render(){const{ns:e}=this,{node:l,panel:s}=this.$parent,{data:a,label:i}=l,{renderLabelFn:v}=s;return Pa("span",{class:e.e("label")},v?v({node:l,data:a}):i)}});const Re=Symbol(),wl=ue({name:"ElCascaderNode",components:{ElCheckbox:il,ElRadio:ul,NodeContent:Cl,ElIcon:ce,Check:ga,Loading:ba,ArrowRight:sl},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:l}){const s=xe(Re),a=de("cascader-node"),i=m(()=>s.isHoverMenu),v=m(()=>s.config.multiple),p=m(()=>s.config.checkStrictly),k=m(()=>{var w;return(w=s.checkedNodes[0])==null?void 0:w.uid}),u=m(()=>e.node.isDisabled),N=m(()=>e.node.isLeaf),E=m(()=>p.value&&!N.value||!u.value),y=m(()=>D(s.expandingNode)),B=m(()=>p.value&&s.checkedNodes.some(D)),D=w=>{var P;const{level:K,uid:Q}=e.node;return((P=w==null?void 0:w.pathNodes[K-1])==null?void 0:P.uid)===Q},q=()=>{y.value||s.expandNode(e.node)},H=w=>{const{node:P}=e;w!==P.checked&&s.handleCheckChange(P,w)},I=()=>{s.lazyLoad(e.node,()=>{N.value||q()})},R=w=>{i.value&&(M(),!N.value&&l("expand",w))},M=()=>{const{node:w}=e;!E.value||w.loading||(w.loaded?q():I())},W=()=>{i.value&&!N.value||(N.value&&!u.value&&!p.value&&!v.value?j(!0):M())},A=w=>{p.value?(H(w),e.node.loaded&&q()):j(w)},j=w=>{e.node.loaded?(H(w),!p.value&&q()):I()};return{panel:s,isHoverMenu:i,multiple:v,checkStrictly:p,checkedNodeId:k,isDisabled:u,isLeaf:N,expandable:E,inExpandingPath:y,inCheckedPath:B,ns:a,handleHoverExpand:R,handleExpand:M,handleClick:W,handleCheck:j,handleSelectCheck:A}}}),Nl=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],El=ve("span",null,null,-1);function Sl(e,l,s,a,i,v){const p=J("el-checkbox"),k=J("el-radio"),u=J("check"),N=J("el-icon"),E=J("node-content"),y=J("loading"),B=J("arrow-right");return g(),L("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:x([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:l[2]||(l[2]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onFocus:l[3]||(l[3]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onClick:l[4]||(l[4]=(...D)=>e.handleClick&&e.handleClick(...D))},[U(" prefix "),e.multiple?(g(),F(p,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:l[0]||(l[0]=ke(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(g(),F(k,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:l[1]||(l[1]=ke(()=>{},["stop"]))},{default:z(()=>[U(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),El]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(g(),F(N,{key:2,class:x(e.ns.e("prefix"))},{default:z(()=>[Y(u)]),_:1},8,["class"])):U("v-if",!0),U(" content "),Y(E),U(" postfix "),e.isLeaf?U("v-if",!0):(g(),L(oe,{key:3},[e.node.loading?(g(),F(N,{key:0,class:x([e.ns.is("loading"),e.ns.e("postfix")])},{default:z(()=>[Y(y)]),_:1},8,["class"])):(g(),F(N,{key:1,class:x(["arrow-right",e.ns.e("postfix")])},{default:z(()=>[Y(B)]),_:1},8,["class"]))],64))],42,Nl)}var Vl=Ne(wl,[["render",Sl],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const $l=ue({name:"ElCascaderMenu",components:{Loading:ba,ElIcon:ce,ElScrollbar:ma,ElCascaderNode:Vl},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const l=Ba(),s=de("cascader-menu"),{t:a}=da(),i=kl();let v=null,p=null;const k=xe(Re),u=_(null),N=m(()=>!e.nodes.length),E=m(()=>!k.initialLoaded),y=m(()=>`cascader-menu-${i}-${e.index}`),B=I=>{v=I.target},D=I=>{if(!(!k.isHoverMenu||!v||!u.value))if(v.contains(I.target)){q();const R=l.vnode.el,{left:M}=R.getBoundingClientRect(),{offsetWidth:W,offsetHeight:A}=R,j=I.clientX-M,w=v.offsetTop,P=w+v.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${j} ${w} L${W} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${j} ${P} L${W} ${A} V${P} Z" />
        `}else p||(p=window.setTimeout(H,k.config.hoverThreshold))},q=()=>{p&&(clearTimeout(p),p=null)},H=()=>{u.value&&(u.value.innerHTML="",q())};return{ns:s,panel:k,hoverZone:u,isEmpty:N,isLoading:E,menuId:y,t:a,handleExpand:B,handleMouseMove:D,clearHoverZone:H}}});function Tl(e,l,s,a,i,v){const p=J("el-cascader-node"),k=J("loading"),u=J("el-icon"),N=J("el-scrollbar");return g(),F(N,{key:e.menuId,tag:"ul",role:"menu",class:x(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:z(()=>{var E;return[(g(!0),L(oe,null,ge(e.nodes,y=>(g(),F(p,{key:y.uid,node:y,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(g(),L("div",{key:0,class:x(e.ns.e("empty-text"))},[Y(u,{size:"14",class:x(e.ns.is("loading"))},{default:z(()=>[Y(k)]),_:1},8,["class"]),La(" "+se(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(g(),L("div",{key:1,class:x(e.ns.e("empty-text"))},se(e.t("el.cascader.noData")),3)):(E=e.panel)!=null&&E.isHoverMenu?(g(),L("svg",{key:2,ref:"hoverZone",class:x(e.ns.e("hover-zone"))},null,2)):U("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var xl=Ne($l,[["render",Tl],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let Il=0;const _l=e=>{const l=[e];let{parent:s}=e;for(;s;)l.unshift(s),s=s.parent;return l};class be{constructor(l,s,a,i=!1){this.data=l,this.config=s,this.parent=a,this.root=i,this.uid=Il++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:v,label:p,children:k}=s,u=l[k],N=_l(this);this.level=i?0:a?a.level+1:1,this.value=l[v],this.label=l[p],this.pathNodes=N,this.pathValues=N.map(E=>E.value),this.pathLabels=N.map(E=>E.label),this.childrenData=u,this.children=(u||[]).map(E=>new be(E,s,this)),this.loaded=!s.lazy||this.isLeaf||!Ke(u)}get isDisabled(){const{data:l,parent:s,config:a}=this,{disabled:i,checkStrictly:v}=a;return(Je(i)?i(l,this):!!l[i])||!v&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:l,config:s,childrenData:a,loaded:i}=this,{lazy:v,leaf:p}=s,k=Je(p)?p(l,this):l[p];return Wa(k)?v&&!i?!1:!(Array.isArray(a)&&a.length):!!k}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(l){const{childrenData:s,children:a}=this,i=new be(l,this.config,this);return Array.isArray(s)?s.push(l):this.childrenData=[l],a.push(i),i}calcText(l,s){const a=l?this.pathLabels.join(s):this.label;return this.text=a,a}broadcast(l,...s){const a=`onParent${sa(l)}`;this.children.forEach(i=>{i&&(i.broadcast(l,...s),i[a]&&i[a](...s))})}emit(l,...s){const{parent:a}=this,i=`onChild${sa(l)}`;a&&(a[i]&&a[i](...s),a.emit(l,...s))}onParentCheck(l){this.isDisabled||this.setCheckState(l)}onChildCheck(){const{children:l}=this,s=l.filter(i=>!i.isDisabled),a=s.length?s.every(i=>i.checked):!1;this.setCheckState(a)}setCheckState(l){const s=this.children.length,a=this.children.reduce((i,v)=>{const p=v.checked?1:v.indeterminate?.5:0;return i+p},0);this.checked=this.loaded&&this.children.filter(i=>!i.isDisabled).every(i=>i.loaded&&i.checked)&&l,this.indeterminate=this.loaded&&a!==s&&a>0}doCheck(l){if(this.checked===l)return;const{checkStrictly:s,multiple:a}=this.config;s||!a?this.checked=l:(this.broadcast("check",l),this.setCheckState(l),this.emit("check"))}}const Oe=(e,l)=>e.reduce((s,a)=>(a.isLeaf?s.push(a):(!l&&s.push(a),s=s.concat(Oe(a.children,l))),s),[]);class ia{constructor(l,s){this.config=s;const a=(l||[]).map(i=>new be(i,this.config));this.nodes=a,this.allNodes=Oe(a,!1),this.leafNodes=Oe(a,!0)}getNodes(){return this.nodes}getFlattedNodes(l){return l?this.leafNodes:this.allNodes}appendNode(l,s){const a=s?s.appendChild(l):new be(l,this.config);s||this.nodes.push(a),this.allNodes.push(a),a.isLeaf&&this.leafNodes.push(a)}appendNodes(l,s){l.forEach(a=>this.appendNode(a,s))}getNodeByValue(l,s=!1){return!l&&l!==0?null:this.getFlattedNodes(s).find(i=>Ce(i.value,l)||Ce(i.pathValues,l))||null}getSameNode(l){return l&&this.getFlattedNodes(!1).find(({value:a,level:i})=>Ce(l.value,a)&&l.level===i)||null}}const ka=qe({modelValue:{type:re([Number,String,Array])},options:{type:re(Array),default:()=>[]},props:{type:re(Object),default:()=>({})}}),Dl={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Ha,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ml=e=>m(()=>({...Dl,...e.props})),ua=e=>{if(!e)return 0;const l=e.id.split("-");return Number(l[l.length-2])},Pl=e=>{if(!e)return;const l=e.querySelector("input");l?l.click():Za(e)&&e.click()},Ll=(e,l)=>{const s=l.slice(0),a=s.map(v=>v.uid),i=e.reduce((v,p)=>{const k=a.indexOf(p.uid);return k>-1&&(v.push(p),s.splice(k,1),a.splice(k,1)),v},[]);return i.push(...s),i},Bl=ue({name:"ElCascaderPanel",components:{ElCascaderMenu:xl},props:{...ka,border:{type:Boolean,default:!0},renderLabel:Function},emits:[ie,we,"close","expand-change"],setup(e,{emit:l,slots:s}){let a=!1;const i=de("cascader"),v=Ml(e);let p=null;const k=_(!0),u=_([]),N=_(null),E=_([]),y=_(null),B=_([]),D=m(()=>v.value.expandTrigger==="hover"),q=m(()=>e.renderLabel||s.default),H=()=>{const{options:d}=e,h=v.value;a=!1,p=new ia(d,h),E.value=[p.getNodes()],h.lazy&&Ke(e.options)?(k.value=!1,I(void 0,C=>{C&&(p=new ia(C,h),E.value=[p.getNodes()]),k.value=!0,K(!1,!0)})):K(!1,!0)},I=(d,h)=>{const C=v.value;d=d||new be({},C,void 0,!0),d.loading=!0;const S=o=>{const f=d,b=f.root?null:f;o&&(p==null||p.appendNodes(o,b)),f.loading=!1,f.loaded=!0,f.childrenData=f.childrenData||[],h&&h(o)};C.lazyLoad(d,S)},R=(d,h)=>{var C;const{level:S}=d,o=E.value.slice(0,S);let f;d.isLeaf?f=d.pathNodes[S-2]:(f=d,o.push(d.children)),((C=y.value)==null?void 0:C.uid)!==(f==null?void 0:f.uid)&&(y.value=d,E.value=o,!h&&l("expand-change",(d==null?void 0:d.pathValues)||[]))},M=(d,h,C=!0)=>{const{checkStrictly:S,multiple:o}=v.value,f=B.value[0];a=!0,!o&&(f==null||f.doCheck(!1)),d.doCheck(h),P(),C&&!o&&!S&&l("close"),!C&&!o&&!S&&W(d)},W=d=>{d&&(d=d.parent,W(d),d&&R(d))},A=d=>p==null?void 0:p.getFlattedNodes(d),j=d=>{var h;return(h=A(d))==null?void 0:h.filter(C=>C.checked!==!1)},w=()=>{B.value.forEach(d=>d.doCheck(!1)),P(),E.value=E.value.slice(0,1),y.value=null,l("expand-change",[])},P=()=>{var d;const{checkStrictly:h,multiple:C}=v.value,S=B.value,o=j(!h),f=Ll(S,o),b=f.map(V=>V.valueByOption);B.value=f,N.value=C?b:(d=b[0])!=null?d:null},K=(d=!1,h=!1)=>{const{modelValue:C}=e,{lazy:S,multiple:o,checkStrictly:f}=v.value,b=!f;if(!(!k.value||a||!h&&Ce(C,N.value)))if(S&&!d){const Z=oa(yl(ra(C))).map($=>p==null?void 0:p.getNodeByValue($)).filter($=>!!$&&!$.loaded&&!$.loading);Z.length?Z.forEach($=>{I($,()=>K(!1,h))}):K(!0,h)}else{const V=o?ra(C):[C],Z=oa(V.map($=>p==null?void 0:p.getNodeByValue($,b)));Q(Z,h),N.value=pa(C)}},Q=(d,h=!0)=>{const{checkStrictly:C}=v.value,S=B.value,o=d.filter(V=>!!V&&(C||V.isLeaf)),f=p==null?void 0:p.getSameNode(y.value),b=h&&f||o[0];b?b.pathNodes.forEach(V=>R(V,!0)):y.value=null,S.forEach(V=>V.doCheck(!1)),o.forEach(V=>V.doCheck(!0)),B.value=o,he(ee)},ee=()=>{fa&&u.value.forEach(d=>{const h=d==null?void 0:d.$el;if(h){const C=h.querySelector(`.${i.namespace.value}-scrollbar__wrap`),S=h.querySelector(`.${i.b("node")}.${i.is("active")}`)||h.querySelector(`.${i.b("node")}.in-active-path`);pl(C,S)}})},ae=d=>{const h=d.target,{code:C}=d;switch(C){case O.up:case O.down:{d.preventDefault();const S=C===O.up?-1:1;Ve(va(h,S,`.${i.b("node")}[tabindex="-1"]`));break}case O.left:{d.preventDefault();const S=u.value[ua(h)-1],o=S==null?void 0:S.$el.querySelector(`.${i.b("node")}[aria-expanded="true"]`);Ve(o);break}case O.right:{d.preventDefault();const S=u.value[ua(h)+1],o=S==null?void 0:S.$el.querySelector(`.${i.b("node")}[tabindex="-1"]`);Ve(o);break}case O.enter:Pl(h);break}};return Fa(Re,za({config:v,expandingNode:y,checkedNodes:B,isHoverMenu:D,initialLoaded:k,renderLabelFn:q,lazyLoad:I,expandNode:R,handleCheckChange:M})),ne([v,()=>e.options],H,{deep:!0,immediate:!0}),ne(()=>e.modelValue,()=>{a=!1,K()},{deep:!0}),ne(()=>N.value,d=>{Ce(d,e.modelValue)||(l(ie,d),l(we,d))}),Aa(()=>u.value=[]),ca(()=>!Ke(e.modelValue)&&K()),{ns:i,menuList:u,menus:E,checkedNodes:B,handleKeyDown:ae,handleCheckChange:M,getFlattedNodes:A,getCheckedNodes:j,clearCheckedNodes:w,calculateCheckedValue:P,scrollToExpandingNode:ee}}});function Hl(e,l,s,a,i,v){const p=J("el-cascader-menu");return g(),L("div",{class:x([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:l[0]||(l[0]=(...k)=>e.handleKeyDown&&e.handleKeyDown(...k))},[(g(!0),L(oe,null,ge(e.menus,(k,u)=>(g(),F(p,{key:u,ref_for:!0,ref:N=>e.menuList[u]=N,index:u,nodes:[...k]},null,8,["index","nodes"]))),128))],34)}var $e=Ne(Bl,[["render",Hl],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);$e.install=e=>{e.component($e.name,$e)};const Fl=$e,zl=qe({...ka,size:ha,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:re(Function),default:(e,l)=>e.text.includes(l)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:re(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Xa.teleported,tagType:{...dl.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),Al={[ie]:e=>!!e||e===null,[we]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Ja(e),expandChange:e=>!!e,removeTag:e=>!!e},Kl={key:0},Ol=["placeholder","onKeydown"],ql=["onClick"],Rl="ElCascader",jl=ue({name:Rl}),Ul=ue({...jl,props:zl,emits:Al,setup(e,{expose:l,emit:s}){const a=e,i={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:t})=>{const{modifiersData:n,placement:c}=t;["right","left","bottom","top"].includes(c)||(n.arrow.x=35)},requires:["arrow"]}]},v=Ka();let p=0,k=0;const u=de("cascader"),N=de("input"),{t:E}=da(),{form:y,formItem:B}=ml(),D=_(null),q=_(null),H=_(null),I=_(null),R=_(null),M=_(!1),W=_(!1),A=_(!1),j=_(!1),w=_(""),P=_(""),K=_([]),Q=_([]),ee=_([]),ae=_(!1),d=m(()=>v.style),h=m(()=>a.disabled||(y==null?void 0:y.disabled)),C=m(()=>a.placeholder||E("el.cascader.placeholder")),S=m(()=>P.value||K.value.length>0||ae.value?"":C.value),o=ya(),f=m(()=>["small"].includes(o.value)?"small":"default"),b=m(()=>!!a.props.multiple),V=m(()=>!a.filterable||b.value),Z=m(()=>b.value?P.value:w.value),$=m(()=>{var t;return((t=I.value)==null?void 0:t.checkedNodes)||[]}),pe=m(()=>!a.clearable||h.value||A.value||!W.value?!1:!!$.value.length),Ee=m(()=>{const{showAllLevels:t,separator:n}=a,c=$.value;return c.length?b.value?"":c[0].calcText(t,n):""}),_e=m({get(){return pa(a.modelValue)},set(t){s(ie,t),s(we,t),a.validateEvent&&(B==null||B.validate("change").catch(n=>Ya()))}}),Ca=m(()=>[u.b(),u.m(o.value),u.is("disabled",h.value),v.class]),wa=m(()=>[N.e("icon"),"icon-arrow-down",u.is("reverse",M.value)]),Na=m(()=>u.is("focus",M.value||j.value)),je=m(()=>{var t,n;return(n=(t=D.value)==null?void 0:t.popperRef)==null?void 0:n.contentRef}),X=t=>{var n,c,T;h.value||(t=t??!M.value,t!==M.value&&(M.value=t,(c=(n=q.value)==null?void 0:n.input)==null||c.setAttribute("aria-expanded",`${t}`),t?(ye(),he((T=I.value)==null?void 0:T.scrollToExpandingNode)):a.filterable&&Le(),s("visibleChange",t)))},ye=()=>{he(()=>{var t;(t=D.value)==null||t.updatePopper()})},De=()=>{A.value=!1},Me=t=>{const{showAllLevels:n,separator:c}=a;return{node:t,key:t.uid,text:t.calcText(n,c),hitState:!1,closable:!h.value&&!t.isDisabled,isCollapseTag:!1}},Pe=t=>{var n;const c=t.node;c.doCheck(!1),(n=I.value)==null||n.calculateCheckedValue(),s("removeTag",c.valueByOption)},Ea=()=>{if(!b.value)return;const t=$.value,n=[],c=[];if(t.forEach(T=>c.push(Me(T))),Q.value=c,t.length){const[T,...le]=t,te=le.length;n.push(Me(T)),te&&(a.collapseTags?n.push({key:-1,text:`+ ${te}`,closable:!1,isCollapseTag:!0}):le.forEach(G=>n.push(Me(G))))}K.value=n},Ue=()=>{var t,n;const{filterMethod:c,showAllLevels:T,separator:le}=a,te=(n=(t=I.value)==null?void 0:t.getFlattedNodes(!a.props.checkStrictly))==null?void 0:n.filter(G=>G.isDisabled?!1:(G.calcText(T,le),c(G,Z.value)));b.value&&(K.value.forEach(G=>{G.hitState=!1}),Q.value.forEach(G=>{G.hitState=!1})),A.value=!0,ee.value=te,ye()},Sa=()=>{var t;let n;A.value&&R.value?n=R.value.$el.querySelector(`.${u.e("suggestion-item")}`):n=(t=I.value)==null?void 0:t.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),n&&(n.focus(),!A.value&&n.click())},We=()=>{var t,n;const c=(t=q.value)==null?void 0:t.input,T=H.value,le=(n=R.value)==null?void 0:n.$el;if(!(!fa||!c)){if(le){const te=le.querySelector(`.${u.e("suggestion-list")}`);te.style.minWidth=`${c.offsetWidth}px`}if(T){const{offsetHeight:te}=T,G=K.value.length>0?`${Math.max(te+6,p)}px`:`${p}px`;c.style.height=G,ye()}}},Va=t=>{var n;return(n=I.value)==null?void 0:n.getCheckedNodes(t)},$a=t=>{ye(),s("expandChange",t)},fe=t=>{var n;const c=(n=t.target)==null?void 0:n.value;if(t.type==="compositionend")ae.value=!1,he(()=>Be(c));else{const T=c[c.length-1]||"";ae.value=!hl(T)}},Ta=t=>{if(!ae.value)switch(t.code){case O.enter:X();break;case O.down:X(!0),he(Sa),t.preventDefault();break;case O.esc:M.value===!0&&(t.preventDefault(),t.stopPropagation(),X(!1));break;case O.tab:X(!1);break}},xa=()=>{var t;(t=I.value)==null||t.clearCheckedNodes(),!M.value&&a.filterable&&Le(),X(!1)},Le=()=>{const{value:t}=Ee;w.value=t,P.value=t},Ia=t=>{var n,c;const{checked:T}=t;b.value?(n=I.value)==null||n.handleCheckChange(t,!T,!1):(!T&&((c=I.value)==null||c.handleCheckChange(t,!0,!1)),X(!1))},_a=t=>{const n=t.target,{code:c}=t;switch(c){case O.up:case O.down:{const T=c===O.up?-1:1;Ve(va(n,T,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case O.enter:n.click();break}},Da=()=>{const t=K.value,n=t[t.length-1];k=P.value?0:k+1,!(!n||!k||a.collapseTags&&t.length>1)&&(n.hitState?Pe(n):n.hitState=!0)},Ze=t=>{const n=t.target,c=u.e("search-input");n.className===c&&(j.value=!0),s("focus",t)},Xe=t=>{j.value=!1,s("blur",t)},Ma=Ga(()=>{const{value:t}=Z;if(!t)return;const n=a.beforeFilter(t);Oa(n)?n.then(Ue).catch(()=>{}):n!==!1?Ue():De()},a.debounce),Be=(t,n)=>{!M.value&&X(!0),!(n!=null&&n.isComposing)&&(t?Ma():De())};return ne(A,ye),ne([$,h],Ea),ne(K,()=>{he(()=>We())}),ne(Ee,Le,{immediate:!0}),ca(()=>{const t=q.value.input,n=Number.parseFloat(Qa(N.cssVarName("input-height"),t).value)-2;p=t.offsetHeight||n,el(t,We)}),l({getCheckedNodes:Va,cascaderPanelRef:I,togglePopperVisible:X,contentRef:je}),(t,n)=>(g(),F(r(Qe),{ref_key:"tooltipRef",ref:D,visible:M.value,teleported:t.teleported,"popper-class":[r(u).e("dropdown"),t.popperClass],"popper-options":i,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${r(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:De},{default:z(()=>[me((g(),L("div",{class:x(r(Ca)),style:Ae(r(d)),onClick:n[5]||(n[5]=()=>X(r(V)?void 0:!0)),onKeydown:Ta,onMouseenter:n[6]||(n[6]=c=>W.value=!0),onMouseleave:n[7]||(n[7]=c=>W.value=!1)},[Y(r(vl),{ref_key:"input",ref:q,modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=c=>w.value=c),placeholder:r(S),readonly:r(V),disabled:r(h),"validate-event":!1,size:r(o),class:x(r(Na)),tabindex:r(b)&&t.filterable&&!r(h)?-1:void 0,onCompositionstart:fe,onCompositionupdate:fe,onCompositionend:fe,onFocus:Ze,onBlur:Xe,onInput:Be},{suffix:z(()=>[r(pe)?(g(),F(r(ce),{key:"clear",class:x([r(N).e("icon"),"icon-circle-close"]),onClick:ke(xa,["stop"])},{default:z(()=>[Y(r(nl))]),_:1},8,["class","onClick"])):(g(),F(r(ce),{key:"arrow-down",class:x(r(wa)),onClick:n[0]||(n[0]=ke(c=>X(),["stop"]))},{default:z(()=>[Y(r(ol))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),r(b)?(g(),L("div",{key:0,ref_key:"tagWrapper",ref:H,class:x(r(u).e("tags"))},[(g(!0),L(oe,null,ge(K.value,c=>(g(),F(r(na),{key:c.key,type:t.tagType,size:r(f),hit:c.hitState,closable:c.closable,"disable-transitions":"",onClose:T=>Pe(c)},{default:z(()=>[c.isCollapseTag===!1?(g(),L("span",Kl,se(c.text),1)):(g(),F(r(Qe),{key:1,disabled:M.value||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:z(()=>[ve("span",null,se(c.text),1)]),content:z(()=>[ve("div",{class:x(r(u).e("collapse-tags"))},[(g(!0),L(oe,null,ge(Q.value.slice(1),(T,le)=>(g(),L("div",{key:le,class:x(r(u).e("collapse-tag"))},[(g(),F(r(na),{key:T.key,class:"in-tooltip",type:t.tagType,size:r(f),hit:T.hitState,closable:T.closable,"disable-transitions":"",onClose:te=>Pe(T)},{default:z(()=>[ve("span",null,se(T.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),t.filterable&&!r(h)?me((g(),L("input",{key:0,"onUpdate:modelValue":n[2]||(n[2]=c=>P.value=c),type:"text",class:x(r(u).e("search-input")),placeholder:r(Ee)?"":r(C),onInput:n[3]||(n[3]=c=>Be(P.value,c)),onClick:n[4]||(n[4]=ke(c=>X(!0),["stop"])),onKeydown:qa(Da,["delete"]),onCompositionstart:fe,onCompositionupdate:fe,onCompositionend:fe,onFocus:Ze,onBlur:Xe},null,42,Ol)),[[Ra,P.value]]):U("v-if",!0)],2)):U("v-if",!0)],38)),[[r(cl),()=>X(!1),r(je)]])]),content:z(()=>[me(Y(r(Fl),{ref_key:"cascaderPanelRef",ref:I,modelValue:r(_e),"onUpdate:modelValue":n[8]||(n[8]=c=>ja(_e)?_e.value=c:null),options:t.options,props:a.props,border:!1,"render-label":t.$slots.default,onExpandChange:$a,onClose:n[9]||(n[9]=c=>t.$nextTick(()=>X(!1)))},null,8,["modelValue","options","props","render-label"]),[[Ie,!A.value]]),t.filterable?me((g(),F(r(ma),{key:0,ref_key:"suggestionPanel",ref:R,tag:"ul",class:x(r(u).e("suggestion-panel")),"view-class":r(u).e("suggestion-list"),onKeydown:_a},{default:z(()=>[ee.value.length?(g(!0),L(oe,{key:0},ge(ee.value,c=>(g(),L("li",{key:c.uid,class:x([r(u).e("suggestion-item"),r(u).is("checked",c.checked)]),tabindex:-1,onClick:T=>Ia(c)},[ve("span",null,se(c.text),1),c.checked?(g(),F(r(ce),{key:0},{default:z(()=>[Y(r(ga))]),_:1})):U("v-if",!0)],10,ql))),128)):Ua(t.$slots,"empty",{key:1},()=>[ve("li",{class:x(r(u).e("empty-text"))},se(r(E)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ie,A.value]]):U("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Te=Ne(Ul,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Te.install=e=>{e.component(Te.name,Te)};const Wl=Te,ht=Wl,Zl=qe({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:re([Array,Object]),default:()=>ea(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:re([Array,Object]),default:()=>[Se,Se,Se]},voidIcon:{type:aa,default:()=>rl},disabledVoidIcon:{type:aa,default:()=>Se},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:re(Array),default:()=>ea(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:ha,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),Xl={[we]:e=>la(e),[ie]:e=>la(e)},Jl=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Yl=["onMousemove","onClick"],Gl=ue({name:"ElRate"}),Ql=ue({...Gl,props:Zl,emits:Xl,setup(e,{expose:l,emit:s}){const a=e;function i(o,f){const b=$=>Ye($),V=Object.keys(f).map($=>+$).filter($=>{const pe=f[$];return(b(pe)?pe.excluded:!1)?o<$:o<=$}).sort(($,pe)=>$-pe),Z=f[V[0]];return b(Z)&&Z.value||Z}const v=xe(al,void 0),p=xe(ll,void 0),k=ya(),u=de("rate"),{inputId:N,isLabeledByFormItem:E}=gl(a,{formItemContext:p}),y=_(a.modelValue),B=_(-1),D=_(!0),q=m(()=>[u.b(),u.m(k.value)]),H=m(()=>a.disabled||(v==null?void 0:v.disabled)),I=m(()=>u.cssVarBlock({"void-color":a.voidColor,"disabled-void-color":a.disabledVoidColor,"fill-color":A.value})),R=m(()=>{let o="";return a.showScore?o=a.scoreTemplate.replace(/\{\s*value\s*\}/,H.value?`${a.modelValue}`:`${y.value}`):a.showText&&(o=a.texts[Math.ceil(y.value)-1]),o}),M=m(()=>a.modelValue*100-Math.floor(a.modelValue)*100),W=m(()=>He(a.colors)?{[a.lowThreshold]:a.colors[0],[a.highThreshold]:{value:a.colors[1],excluded:!0},[a.max]:a.colors[2]}:a.colors),A=m(()=>{const o=i(y.value,W.value);return Ye(o)?"":o}),j=m(()=>{let o="";return H.value?o=`${M.value}%`:a.allowHalf&&(o="50%"),{color:A.value,width:o}}),w=m(()=>{let o=He(a.icons)?[...a.icons]:{...a.icons};return o=Fe(o),He(o)?{[a.lowThreshold]:o[0],[a.highThreshold]:{value:o[1],excluded:!0},[a.max]:o[2]}:o}),P=m(()=>i(a.modelValue,w.value)),K=m(()=>H.value?Ge(a.disabledVoidIcon)?a.disabledVoidIcon:Fe(a.disabledVoidIcon):Ge(a.voidIcon)?a.voidIcon:Fe(a.voidIcon)),Q=m(()=>i(y.value,w.value));function ee(o){const f=H.value&&M.value>0&&o-1<a.modelValue&&o>a.modelValue,b=a.allowHalf&&D.value&&o-.5<=y.value&&o>y.value;return f||b}function ae(o){a.clearable&&o===a.modelValue&&(o=0),s(ie,o),a.modelValue!==o&&s("change",o)}function d(o){H.value||(a.allowHalf&&D.value?ae(y.value):ae(o))}function h(o){if(H.value)return;let f=y.value;const b=o.code;return b===O.up||b===O.right?(a.allowHalf?f+=.5:f+=1,o.stopPropagation(),o.preventDefault()):(b===O.left||b===O.down)&&(a.allowHalf?f-=.5:f-=1,o.stopPropagation(),o.preventDefault()),f=f<0?0:f,f=f>a.max?a.max:f,s(ie,f),s("change",f),f}function C(o,f){if(!H.value){if(a.allowHalf&&f){let b=f.target;ta(b,u.e("item"))&&(b=b.querySelector(`.${u.e("icon")}`)),(b.clientWidth===0||ta(b,u.e("decimal")))&&(b=b.parentNode),D.value=f.offsetX*2<=b.clientWidth,y.value=D.value?o-.5:o}else y.value=o;B.value=o}}function S(){H.value||(a.allowHalf&&(D.value=a.modelValue!==Math.floor(a.modelValue)),y.value=a.modelValue,B.value=-1)}return ne(()=>a.modelValue,o=>{y.value=o,D.value=a.modelValue!==Math.floor(a.modelValue)}),a.modelValue||s(ie,0),l({setCurrentValue:C,resetCurrentValue:S}),(o,f)=>{var b;return g(),L("div",{id:r(N),class:x([r(q),r(u).is("disabled",r(H))]),role:"slider","aria-label":r(E)?void 0:o.label||"rating","aria-labelledby":r(E)?(b=r(p))==null?void 0:b.labelId:void 0,"aria-valuenow":y.value,"aria-valuetext":r(R)||void 0,"aria-valuemin":"0","aria-valuemax":o.max,tabindex:"0",style:Ae(r(I)),onKeydown:h},[(g(!0),L(oe,null,ge(o.max,(V,Z)=>(g(),L("span",{key:Z,class:x(r(u).e("item")),onMousemove:$=>C(V,$),onMouseleave:S,onClick:$=>d(V)},[Y(r(ce),{class:x([r(u).e("icon"),{hover:B.value===V},r(u).is("active",V<=y.value)])},{default:z(()=>[ee(V)?U("v-if",!0):(g(),L(oe,{key:0},[me((g(),F(ze(r(Q)),null,null,512)),[[Ie,V<=y.value]]),me((g(),F(ze(r(K)),null,null,512)),[[Ie,!(V<=y.value)]])],64)),ee(V)?(g(),F(r(ce),{key:1,style:Ae(r(j)),class:x([r(u).e("icon"),r(u).e("decimal")])},{default:z(()=>[(g(),F(ze(r(P))))]),_:1},8,["style","class"])):U("v-if",!0)]),_:2},1032,["class"])],42,Yl))),128)),o.showText||o.showScore?(g(),L("span",{key:0,class:x(r(u).e("text"))},se(r(R)),3)):U("v-if",!0)],46,Jl)}}});var et=Ne(Ql,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const mt=tl(et);export{ht as E,mt as a,kl as g};
